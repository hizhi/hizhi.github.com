

<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>回到顶部</title>
	<style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
	body{
		height: 2000px;
	}
	a#top{
		display: block;
		width: 30px;
		height: 30px;
		cursor: pointer;
		line-height: 30px;
		text-decoration: none;
		text-align: center;
		background: #000;
		color: #fff;
		position: fixed;
		right: 10px;
		bottom: -50px;

		/*css3支持*/
		border-radius: 15px;
		-webkit-border-radius: 15px;
		-moz-border-radius: 15px;
	}
	</style>

	<script type="text/javascript">
	window.onload = function () {
		var oTop = document.getElementById('top');
		// var scrollTop = 0;
		var timer2 = null; //用于关闭显示隐藏定时器

		oTop.timer = null;
		oTop.bSys = true;  //用于标记是否是点击按钮触发的

		window.onscroll = function () {
			show(50);
			//鼠标滚动停止
			stopMove(oTop);
		};
		//点击按钮
		oTop.onclick = function(){
			toTop(this);
		};


		//显示隐藏到顶部按钮
		function show (len) {
			clearInterval(timer2);
			setInterval(function () {
				var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
					if(scrollTop > 100){
						oTop.style.bottom = len + 'px';
					}
					else if(scrollTop == 0){
						oTop.style.bottom = -len + 'px';
						clearInterval(timer2);
					}
					},30);
		}

		/*回到顶部*/
		function toTop (obj) {
			clearInterval(obj.timer);
			obj.timer = setInterval(function () {
				var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
				var speed = Math.floor(-scrollTop / 7);

				if (scrollTop == 0) {
					clearInterval(obj.timer);
				} else{
					obj.bSys = true;
					document.documentElement.scrollTop = document.body.scrollTop = scrollTop + speed;
				}
			},30);
		}


		//用户拖动滚动条停止滚动
		function stopMove (obj) {
			if(!obj.bSys){
				clearInterval(obj.timer);
			}
			obj.bSys= false;
		}
	};

	</script>
</head>
<body>
	<a id = "top" title="回到顶部" href="javascript:;">^</a>
</body>
</html>